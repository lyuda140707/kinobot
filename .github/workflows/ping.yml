name: Maintenance tasks (every 10â€²)

on:
  schedule:
    - cron: '*/10 * * * *'
  workflow_dispatch:   # â† Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚Ğ¸ Ğ²Ñ€ÑƒÑ‡Ğ½Ñƒ Ñ‡ĞµÑ€ĞµĞ· Actions â†’ Run workflow

env:
  BASE_URL: https://relax-time2.onrender.com

jobs:
  tasks:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ”† Ping backend
        run: curl -m 5 $BASE_URL/ping

      - name: ğŸ§¹ Clean old requests
        run: curl -X POST -m 10 $BASE_URL/jobs/clean-requests

      - name: ğŸ—‘ï¸ Delete old messages
        run: curl -X POST -m 10 $BASE_URL/jobs/delete-old-messages

      - name: ğŸ•µï¸ Check pending payments
        run: curl -X POST -m 10 $BASE_URL/jobs/check-payments

      - name: ğŸ§¹ Clean expired PRO
        run: curl -X POST -m 10 $BASE_URL/clean-pro
